#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running Biome checks before commit..."
npm run check

if [ $? -ne 0 ]; then
  echo "❌ Biome checks failed. Please fix the issues before committing."
  echo "💡 You can run 'npm run check:fix' to fix auto-fixable issues."
  exit 1
fi

echo "✅ Biome checks passed!"

echo "🔒 Running security checks before commit..."
. "$(dirname -- "$0")/_/security-check.sh" "staged"

if [ $? -ne 0 ]; then
  echo "❌ Security checks failed. Please fix the security issues before committing."
  exit 1
fi

echo "✅ Security checks passed! Proceeding with commit."
